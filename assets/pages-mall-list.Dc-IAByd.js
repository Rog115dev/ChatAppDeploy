import{_ as e}from"./uni-segmented-control.DyYNoxRZ.js";import{_ as s,C as t,r,b as l,a,w as i,f as d,F as o,g as n,o as c,e as u,c as h,d as f,X as _,t as m,m as g,i as p,j as k}from"./index-37Su0qRO.js";import{r as y}from"./uni-app.es.D58nOoD0.js";const w=s({data:()=>({page:1,limit:20,last_id:0,records:[],isRefreshing:!1,current:0,items:["待发放","已发放"]}),onShow(){this.getList()},methods:{onClickItem(e){this.current!=e.currentIndex&&(this.current=e.currentIndex,this.records=[],this.last_id=0,this.getList())},loadMore(){this.getList()},getList(){this.$api.mallApi.orderList({page:this.page,limit:this.limit,last_id:this.last_id,status:this.current}).then((e=>{0==e.code&&e.data.data.length>0&&(this.records=[...this.records,...e.data.data],this.records.length>0&&(this.last_id=this.records[this.records.length-1].id))}))},onRefresh(){this.isRefreshing=!0,this.records=[],this.last_id=0,this.getList(),setTimeout((()=>{this.isRefreshing=!1}),1e3)}}},[["render",function(s,w,x,R,b,C){const I=t("cu-custom"),L=y(r("uni-segmented-control"),e),j=n,v=p,S=k,B=_;return c(),l(o,null,[a(I,{bgColor:"bg-gradual-green",isBack:!0},{backText:i((()=>[])),content:i((()=>[u("购买记录")])),right:i((()=>[])),_:1}),a(j,{class:"container",style:d({height:`calc(100% - ${s.CustomBar}px)`})},{default:i((()=>[a(B,{class:"circle-list-wrapper","show-scrollbar":!1,"scroll-y":"","refresher-enabled":"","refresher-triggered":b.isRefreshing,onRefresherrefresh:C.onRefresh,onScrolltolower:C.loadMore},{default:i((()=>[a(j,{class:"segmented-wrapper"},{default:i((()=>[a(L,{current:b.current,values:b.items,onClickItem:C.onClickItem},null,8,["current","values","onClickItem"])])),_:1}),0===b.records.length?(c(),h(j,{key:0,class:"empty-state"},{default:i((()=>[a(j,{class:"empty-text"},{default:i((()=>[u("暂无记录")])),_:1})])),_:1})):(c(),h(j,{key:1,class:"order-list"},{default:i((()=>[(c(!0),l(o,null,f(b.records,((e,s)=>(c(),h(j,{class:"order-item",key:s},{default:i((()=>[a(j,{class:"order-code"},{default:i((()=>[u("订单编号："+m(e.order_code),1)])),_:2},1024),a(j,{class:"order-body"},{default:i((()=>[a(v,{src:e.img},null,8,["src"]),a(j,{class:"order-desc"},{default:i((()=>[a(S,null,{default:i((()=>[u(m(e.name),1)])),_:2},1024),a(j,{class:"detail-wrapper"},{default:i((()=>[a(j,{class:"detail"},{default:i((()=>[a(S,null,{default:i((()=>[u("单价")])),_:1}),a(S,null,{default:i((()=>[u(m(e.points)+"元",1)])),_:2},1024)])),_:2},1024),a(j,{class:"detail"},{default:i((()=>[a(S,null,{default:i((()=>[u("购买数量")])),_:1}),a(S,null,{default:i((()=>[u("x "+m(e.count),1)])),_:2},1024)])),_:2},1024),a(j,{class:"detail"},{default:i((()=>[a(S,null,{default:i((()=>[u("总金额")])),_:1}),a(S,null,{default:i((()=>[u(m(e.total_points)+"元",1)])),_:2},1024)])),_:2},1024),a(j,{class:"detail"},{default:i((()=>[a(S,null,{default:i((()=>[u("购买时间")])),_:1}),a(S,null,{default:i((()=>[u(m(e.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024),1===e.status?(c(),h(j,{key:0,class:"order-num"},{default:i((()=>[u("物流单号："+m(e.order_num),1)])),_:2},1024)):g("",!0)])),_:2},1024)))),128))])),_:1}))])),_:1},8,["refresher-triggered","onRefresherrefresh","onScrolltolower"])])),_:1},8,["style"])],64)}],["__scopeId","data-v-213a8679"]]);export{w as default};
