import{_ as e,M as a,a5 as t,x as s,G as l,A as o,B as n,n as i,C as c,r as u,b as d,a as m,w as r,F as h,g as p,o as g,e as f,t as _,c as b,m as C,ac as k,j as y,aR as I,ab as w,i as M,W as A}from"./index-BWCeDMGH.js";import{_ as q}from"./uni-icons.V_6hCn98.js";import{r as x}from"./uni-app.es.BSjB11UY.js";const v=e({data:()=>({balanceAmount:0,paymentMethods:[{name:"支付宝",value:"支付宝"},{name:"微信",value:"微信"}],selectedMethod:"支付宝",amount:"",account:"",qrCodeImage:"",img:""}),onLoad(e){e.balanceAmount&&(this.balanceAmount=e.balanceAmount)},methods:{handleMethodChange(e){this.selectedMethod=this.paymentMethods[e.detail.value].value},chooseImage(){a({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{t({url:this.$api.msgApi.uploadUrl,filePath:e.tempFiles[0].path,name:"file",header:{Authorization:s("authToken")},success:a=>{let t=JSON.parse(a.data);0==t.code?(this.img=t.data.src,this.qrCodeImage=e.tempFiles[0].path):l({title:t.msg,icon:"none"})}})}})},deleteImage(){this.qrCodeImage="",this.img=""},submitWithdraw(){!this.amount||this.amount<=0?l({title:"请输入提现金额",icon:"none"}):Number(this.amount)>Number(this.balanceAmount)?l({title:"提现金额不足",icon:"none"}):this.account?this.qrCodeImage?(o({title:"提交中..."}),this.$api.msgApi.withdraw({money:this.amount,img:this.img,type:this.selectedMethod,account:this.account}).then((e=>{n(),l({title:e.msg,icon:"none"}),0==e.code&&(this.amount="",this.account="",this.qrCodeImage="",this.img="",i({url:"/pages/mine/withdrawlist"}))}))):l({title:"请上传收款二维码",icon:"none"}):l({title:"请输入提现账号",icon:"none"})}}},[["render",function(e,a,t,s,l,o){const n=k,i=c("cu-custom"),v=y,V=x(u("uni-icons"),q),j=p,z=I,F=w,T=M,N=A;return g(),d(h,null,[m(i,{bgColor:"bg-gradual-green",isBack:!0},{backText:r((()=>[])),content:r((()=>[f("提现")])),right:r((()=>[m(n,{style:{"padding-right":"10px"},url:"/pages/mine/withdrawlist"},{default:r((()=>[f("提现记录")])),_:1})])),_:1}),m(j,{class:"container"},{default:r((()=>[m(j,{class:"section"},{default:r((()=>[m(v,{class:"section-title"},{default:r((()=>[f("提现方式")])),_:1}),m(z,{mode:"selector",range:l.paymentMethods,"range-key":"name",onChange:o.handleMethodChange},{default:r((()=>[m(j,{class:"picker"},{default:r((()=>[m(v,null,{default:r((()=>[f(_("支付宝"===l.selectedMethod?"支付宝":"微信"),1)])),_:1}),m(V,{type:"arrowdown",size:"16",color:"#999"})])),_:1})])),_:1},8,["range","onChange"])])),_:1}),m(j,{class:"section"},{default:r((()=>[m(v,{class:"section-title"},{default:r((()=>[f("提现信息")])),_:1}),m(j,{class:"input-group"},{default:r((()=>[m(v,{class:"input-label"},{default:r((()=>[f("提现金额")])),_:1}),m(j,{class:"input-wrapper"},{default:r((()=>[m(v,{class:"prefix"},{default:r((()=>[f("￥")])),_:1}),m(F,{modelValue:l.amount,"onUpdate:modelValue":a[0]||(a[0]=e=>l.amount=e),type:"number",placeholder:"请输入提现金额",class:"input"},null,8,["modelValue"])])),_:1}),m(v,{class:"balance"},{default:r((()=>[f("可提现余额："+_(l.balanceAmount)+"元",1)])),_:1})])),_:1}),m(j,{class:"input-group"},{default:r((()=>[m(v,{class:"input-label"},{default:r((()=>[f(_("支付宝"===l.selectedMethod?"支付宝账号":"微信账号"),1)])),_:1}),m(F,{modelValue:l.account,"onUpdate:modelValue":a[1]||(a[1]=e=>l.account=e),placeholder:"支付宝"===l.selectedMethod?"请输入支付宝账号":"请输入微信账号",class:"input"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),m(j,{class:"section"},{default:r((()=>[m(v,{class:"section-title"},{default:r((()=>[f("收款二维码")])),_:1}),m(j,{class:"upload-area",onClick:o.chooseImage},{default:r((()=>[l.qrCodeImage?(g(),b(T,{key:1,src:l.qrCodeImage,mode:"aspectFit",class:"preview-image"},null,8,["src"])):(g(),b(j,{key:0,class:"upload-placeholder"},{default:r((()=>[m(V,{type:"camera",size:"48",onClick:o.chooseImage,color:"#999"},null,8,["onClick"]),m(v,{class:"upload-text"},{default:r((()=>[f("上传收款二维码")])),_:1})])),_:1}))])),_:1},8,["onClick"]),l.qrCodeImage?(g(),b(j,{key:0,class:"delete-btn",onClick:o.deleteImage},{default:r((()=>[m(v,null,{default:r((()=>[f("删除")])),_:1})])),_:1},8,["onClick"])):C("",!0)])),_:1}),m(j,{class:"submit-btn"},{default:r((()=>[m(N,{onClick:o.submitWithdraw},{default:r((()=>[f("确认提现")])),_:1},8,["onClick"])])),_:1})])),_:1})],64)}],["__scopeId","data-v-c38b3b0c"]]);export{v as default};
