import{_ as e,o as t,c as i,w as n,e as a,g as s,x as o,u as r,s as c,G as l,ah as d,l as u,f as m,n as p,ai as f,aj as h}from"./index-CJuH9mEN.js";const g=e({name:"im-item",components:{},props:{item:{type:Object,default:function(){return{}}},index:{type:Number,default:0},isSelf:{type:Boolean,default:!1}},data:()=>({}),created:function(){},methods:{}},[["render",function(e,o,r,c,l,d){const u=s;return"diy"==r.item.type?(t(),i(u,{key:0,item:r.item,index:r.index,isSelf:r.isSelf},{default:n((()=>[a(" 自定义 ")])),_:1},8,["item","index","isSelf"])):(t(),i(u,{key:1},{default:n((()=>[a(" 暂不支持该消息类型 ")])),_:1}))}]]),y=o("userInfo"),v=o("appSetting"),w=r(c);const b=e({name:"im-touch",props:{info:{type:Object,default:function(){return{}}},circleAvatar:{type:Boolean,default:!1},profile:{type:Boolean,default:!1},morecheck:{type:Boolean,default:!1},is_private:{type:Boolean,default:!1}},data:()=>({toucheTimer:0,fingerRes:[],distance:0,taptimer:100,appSetting:v}),methods:{openUserInfo(e){if(console.log(this.morecheck,"morecheck"),this.morecheck)return;let t=w.getContact(e.user_id);if(!this.profile&&!t)return l({title:"已开启用户隐私！",icon:"none"}),!1;this.is_private||e.id!=y.user_id&&d({url:"/pages/contacts/detail?id="+this.info.id})}}},[["render",function(e,n,a,o,r,c){const l=s;return t(),i(l,{class:u(["cu-avatar lg",r.appSetting.circleAvatar?"round":"radius"]),onClick:n[0]||(n[0]=e=>c.openUserInfo(a.info)),style:m([{backgroundImage:"url("+a.info.avatar+")"}])},null,8,["class","style"])}]]),k={data:()=>({}),created:function(){},methods:{handlePlay(e){p({url:"/pages/message/video?name="+e.fileName+"&src="+encodeURI(e.content),animationType:"slide-in-bottom"})},previewFile(e){this.islongPress||(this.curMsg=e,this.modelName="preview")},preview(e){let t=this.curMsg,i=t.content.split(".").pop().toLowerCase();if(["mp3","wav","acc"].includes(i)||2==e)return void p({url:"/pages/mine/webview?title=文件预览&src="+encodeURIComponent(t.preview),animationType:"slide-in-bottom"});const n=document.createElement("a");n.style.display="none",n.href=t.download,n.setAttribute("download",t.fileName),n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},showImgs:function(e){for(var t=[],i=e.currentTarget.dataset.img,n=0;n<this.messageList.length;n++)"image"!=this.messageList[n].type&&"emoji"!=this.messageList[n].type||t.push(this.messageList[n].content);f({urls:t,current:i})},openLocation(e){h({latitude:e.latitude,longitude:e.longitude,success:function(){console.log("success")}})},openContact(e){p({url:"/pages/contacts/detail?id="+e.id})},emojiToHtml(e){let t=this.emojiMap;return e.replace(/\[!(\w+)\]/gi,(function(e,i){var n=i;return t[n]?'<img class=\'mr-5\' style="width:18px;height:18px" emoji-name="'.concat(i,'" src="').concat(t[n],'" />'):"[!".concat(i,"]")}))},fileSize(e){return this.$util.getFileSize(e)},sendTime:function(e){return this.$util.timeFormat(e)}}};export{b as a,k as c,g as i};
