import{_ as s,q as a,s as e,G as t,n as o,a4 as n,C as r,r as l,b as i,a as u,w as p,F as d,g as c,o as m,e as h,t as f,f as _,i as y,j as k,ab as g,W as b}from"./index-nIaQZq1w.js";import{_ as w}from"./uni-icons.DLjypYLm.js";import{r as C}from"./uni-app.es.CqmdVAE5.js";import{_ as D}from"./uni-popup.DhfXoNXr.js";import{p as V}from"./uni-keyword.w_CKTqh6.js";const P=a(e);const j=s({components:{payKeyboard:V},data:()=>({title:"转账",password:"",set_msg:"请输入交易密码",show_key:!0,set_info:"",amount:"",remark:"",name:"",avatar:"",user_id:0,type:"",transferData:{}}),onLoad(s){s.type&&(this.type=s.type,"pay"==this.type?this.title="收款":this.title="付款"),s.money&&(this.amount=s.money),this.name=s.name,this.avatar=s.avatar,this.user_id=s.user_id,P.userInfo.trans||(t({title:"请先设置交易密码",icon:"none"}),setTimeout((()=>{o({url:"/pages/mine/secure"})}),1500))},computed:{isAmountValid(){return parseFloat(this.amount)>0}},methods:{closeCouponPopup(){this.$refs.popup.close()},hideFun(){this.closeCouponPopup()},getPassword(s){this.transferData.trans=s.password;let a="transfer";this.type&&(a=this.type),this.$api.msgApi[a](this.transferData).then((s=>{0==s.code?n():(this.closeCouponPopup(),t({title:s.msg,icon:"none"}))})).catch((s=>{}))},handleTransfer(){this.transferData={user_id:this.user_id,remark:this.remark,amount:this.amount},this.transferData.id=this.$util.getUuid(),this.transferData.fromUser=P.userInfo,this.$refs.popup.open()},handleBack(){n()}}},[["render",function(s,a,e,t,o,n){const V=r("cu-custom"),P=y,j=k,v=c,F=g,x=b,A=C(l("uni-icons"),w),T=r("pay-keyboard"),U=C(l("uni-popup"),D);return m(),i(d,null,[u(V,{bgColor:"bg-gradual-green",isBack:!0},{backText:p((()=>[])),content:p((()=>[h(f(o.title),1)])),right:p((()=>[])),_:1}),u(v,{class:"container"},{default:p((()=>[u(v,{class:"user-info"},{default:p((()=>[u(P,{class:"avatar",src:o.avatar},null,8,["src"]),u(j,{class:"nickname"},{default:p((()=>[h(f(o.name),1)])),_:1})])),_:1}),u(v,{class:"amount-input"},{default:p((()=>[u(j,{class:"currency-symbol"},{default:p((()=>[h("¥")])),_:1}),u(F,{modelValue:o.amount,"onUpdate:modelValue":a[0]||(a[0]=s=>o.amount=s),class:"input-box",type:"number",placeholder:"0.00","placeholder-class":"placeholder",focus:!0},null,8,["modelValue"])])),_:1}),u(v,{class:"remark-section"},{default:p((()=>[u(F,{class:"remark-input",placeholder:"添加备注","placeholder-class":"remark-placeholder",maxlength:"20",modelValue:o.remark,"onUpdate:modelValue":a[1]||(a[1]=s=>o.remark=s)},null,8,["modelValue"]),u(j,{class:"word-count"},{default:p((()=>[h(f(o.remark.length)+"/20",1)])),_:1})])),_:1}),u(v,{class:"btn-container"},{default:p((()=>[u(x,{class:"transfer-btn",style:_({backgroundColor:n.isAmountValid?"#07C160":"#D8D8D8"}),disabled:!n.isAmountValid,onClick:n.handleTransfer},{default:p((()=>[h(f("pay"==o.type?"收款":"转账"),1)])),_:1},8,["style","disabled","onClick"])])),_:1}),u(U,{ref:"popup",type:"center"},{default:p((()=>[u(v,{class:"popup-content"},{default:p((()=>[u(v,{class:"popup-header"},{default:p((()=>[u(j,{class:"popup-title"},{default:p((()=>[h("输入交易密码")])),_:1}),u(A,{type:"closeempty",size:"20",color:"#666",onClick:n.closeCouponPopup},null,8,["onClick"])])),_:1}),u(T,{set_info:o.set_info,show_key:o.show_key,ref:"payKeyboard",set_msg:o.set_msg,onHideFun:n.hideFun,onGetPassword:n.getPassword,password:o.password},null,8,["set_info","show_key","set_msg","onHideFun","onGetPassword","password"])])),_:1})])),_:1},512)])),_:1})],64)}],["__scopeId","data-v-c2e15309"]]);export{j as default};
