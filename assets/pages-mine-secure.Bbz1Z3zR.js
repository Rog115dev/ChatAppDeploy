import{_ as e,q as s,s as a,x as t,G as l,C as o,c as d,w as i,g as n,o as c,a as u,e as r,t as m,U as f,l as h,m as g,b as p,F as _,j as w,W as C,ab as V}from"./index-CDOpH1f_.js";const b=s(a);const k=e({data:()=>({userInfo:b.userInfo,globalConfig:b.globalConfig,modelName:"",code:"",account:"",newCode:"",password:"",originalPassword:"",repass:"",loading:!1,editPass:!1,editTranPass:!1}),onShow(){},methods:{logout(){let e=t("client_id");this.$api.LoginApi.logout({client_id:e}).then((e=>{0==e.code&&b.logout()}))},save(){if(""==this.code&&this.userInfo.is_auth)return l({title:"请输入验证码",icon:"none"}),!1;if(this.editTranPass){if(""==this.password||6!=this.password.length)return l({title:"请输入6个字符串的交易密码",icon:"none"}),!1;if(this.password!=this.repass)return l({title:"两次交易密码不一致",icon:"none"}),!1;let e={password:this.password,code:this.code,originalPassword:this.originalPassword};this.$api.msgApi.editTranPassword(e).then((e=>{0==e.code&&(this.modelName="",this.password="",this.repass="",b.trans(!0),l({title:e.msg,icon:"none"}))}))}else if(this.editPass){if(""==this.password||this.password.length<6||this.password.length>16)return l({title:"请输入6-16个字符串的密码",icon:"none"}),!1;if(this.password!=this.repass)return l({title:"两次密码不一致",icon:"none"}),!1;let e={password:this.password,code:this.code,originalPassword:this.originalPassword};this.$api.msgApi.editPassword(e).then((e=>{0==e.code&&(this.modelName="",this.password="",this.repass="",l({title:e.msg,icon:"none"}))}))}else{if(""==this.account)return l({title:"请输入新的账号",icon:"none"}),!1;if(""==this.newCode)return l({title:"请输入新账号的验证码",icon:"none"}),!1;let e={account:this.account,code:this.code,newCode:this.newCode};this.$api.msgApi.editAccount(e).then((e=>{0==e.code&&(this.modelName="",this.account="",this.code="",this.newCode="",l({title:"修改成功，请重新登陆",icon:"none"}))}))}},sendCode(e){let s=e?this.userInfo.account:this.account,a=this.editPass?3:4;if(""==s)return l({title:"请输入新的账号",icon:"none"}),!1;this.loading=!0,this.$api.LoginApi.sendCode({account:s,type:a}).then((e=>{l({title:e.msg,icon:"none"}),this.loading=!1}))}}},[["render",function(e,s,a,t,l,b){const k=o("cu-custom"),x=w,P=n,I=C,y=V;return c(),d(P,null,{default:i((()=>[u(k,{bgColor:"bg-video",isBack:!0},{backText:i((()=>[])),content:i((()=>[r("账号安全")])),_:1}),u(P,{class:"cu-list menu mt-10"},{default:i((()=>[u(P,{class:"cu-item",onClick:e.editAcc},{default:i((()=>[u(P,{class:"content"},{default:i((()=>[u(x,{class:"cuIcon-settings c-f2cd77"}),u(x,{class:"c-f2cd77"},{default:i((()=>[r("我的账号")])),_:1})])),_:1}),u(P,{class:"action"},{default:i((()=>[u(x,{style:{color:"#8799a3"}},{default:i((()=>[r(m(l.userInfo.account),1)])),_:1}),u(x,{class:"text-grey cuIcon-right"})])),_:1})])),_:1},8,["onClick"]),u(P,{class:"cu-item",onClick:s[0]||(s[0]=e=>{l.modelName="show",l.editPass=!0,l.editTranPass=!1})},{default:i((()=>[u(P,{class:"content"},{default:i((()=>[u(x,{class:"cuIcon-lock c-f2cd77"}),u(x,{class:"c-f2cd77"},{default:i((()=>[r("修改密码")])),_:1})])),_:1}),u(P,{class:"action"},{default:i((()=>[u(x,{class:"text-grey cuIcon-right"})])),_:1})])),_:1}),u(P,{class:"cu-item",onClick:s[1]||(s[1]=e=>{l.modelName="show",l.editTranPass=!0})},{default:i((()=>[u(P,{class:"content"},{default:i((()=>[u(x,{class:"cuIcon-lock c-f2cd77"}),u(x,{class:"c-f2cd77"},{default:i((()=>[r("设置交易密码")])),_:1})])),_:1}),u(P,{class:"action"},{default:i((()=>[u(x,{class:"text-grey cuIcon-right"})])),_:1})])),_:1}),u(P,{class:"padding flex flex-direction mt-40",style:{width:"100%"}},{default:i((()=>[u(I,{class:"cu-btn bg-red lg",onClick:s[2]||(s[2]=e=>b.logout())},{default:i((()=>[r("退出登录")])),_:1})])),_:1})])),_:1}),u(P,{class:h(["cu-modal bottom-modal","show"==l.modelName?"show":""]),onClick:s[16]||(s[16]=e=>l.modelName="")},{default:i((()=>[u(P,{class:"cu-dialog",onClick:s[15]||(s[15]=f((()=>{}),["stop"]))},{default:i((()=>[u(P,{class:"cu-bar bg-video"},{default:i((()=>[u(P,{class:"action text-gray",onClick:s[3]||(s[3]=e=>l.modelName="")},{default:i((()=>[r("取消")])),_:1}),u(P,{class:"action text-green",onClick:b.save},{default:i((()=>[r("保存")])),_:1},8,["onClick"])])),_:1}),u(P,{class:"manage-content mb-20"},{default:i((()=>[u(P,{class:"cu-list menu mt-15 bg-video"},{default:i((()=>[l.userInfo.is_auth?(c(),d(P,{key:0,class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("验证码")])),_:1}),u(y,{placeholder:"输入验证码",name:"input",modelValue:l.code,"onUpdate:modelValue":s[4]||(s[4]=e=>l.code=e)},null,8,["modelValue"]),u(I,{class:h(["cu-btn bg-green shadow cu-load",l.loading?"loading":""]),disabled:l.loading,onClick:s[5]||(s[5]=e=>b.sendCode(!0))},{default:i((()=>[r("发送验证码")])),_:1},8,["class","disabled"])])),_:1})):g("",!0),l.editTranPass?(c(),p(_,{key:1},[l.userInfo.trans?(c(),d(P,{key:0,class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("原交易密码")])),_:1}),u(y,{placeholder:"输入原来的交易密码",name:"input",modelValue:l.originalPassword,"onUpdate:modelValue":s[6]||(s[6]=e=>l.originalPassword=e)},null,8,["modelValue"])])),_:1})):g("",!0),u(P,{class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("新交易密码")])),_:1}),u(y,{placeholder:"输入新交易密码",name:"input",modelValue:l.password,"onUpdate:modelValue":s[7]||(s[7]=e=>l.password=e)},null,8,["modelValue"])])),_:1}),u(P,{class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("重复新交易密码")])),_:1}),u(y,{placeholder:"重复输入新交易密码",name:"input",modelValue:l.repass,"onUpdate:modelValue":s[8]||(s[8]=e=>l.repass=e)},null,8,["modelValue"])])),_:1})],64)):l.editPass?(c(),p(_,{key:3},[l.userInfo.is_auth?g("",!0):(c(),d(P,{key:0,class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("原密码")])),_:1}),u(y,{placeholder:"输入原来的密码",name:"input",modelValue:l.originalPassword,"onUpdate:modelValue":s[12]||(s[12]=e=>l.originalPassword=e)},null,8,["modelValue"])])),_:1})),u(P,{class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("新密码")])),_:1}),u(y,{placeholder:"输入新的密码",name:"input",modelValue:l.password,"onUpdate:modelValue":s[13]||(s[13]=e=>l.password=e)},null,8,["modelValue"])])),_:1}),u(P,{class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("重复新密码")])),_:1}),u(y,{placeholder:"重复输入新密码",name:"input",modelValue:l.repass,"onUpdate:modelValue":s[14]||(s[14]=e=>l.repass=e)},null,8,["modelValue"])])),_:1})],64)):(c(),p(_,{key:2},[u(P,{class:"text-gray m-15 text-left"},{default:i((()=>[u(x,{class:"cuIcon-infofill ml-5 mr-10"}),r(" 验证账户的真实性，绑定后请使用新账户来登录！ ")])),_:1}),u(P,{class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("新账号")])),_:1}),u(y,{placeholder:"输入新的邮箱或者手机号",name:"input",modelValue:l.account,"onUpdate:modelValue":s[9]||(s[9]=e=>l.account=e)},null,8,["modelValue"])])),_:1}),u(P,{class:"cu-form-group text-right"},{default:i((()=>[u(P,{class:"title"},{default:i((()=>[r("新账号验证码")])),_:1}),u(y,{placeholder:"输入验证码",name:"input",modelValue:l.newCode,"onUpdate:modelValue":s[10]||(s[10]=e=>l.newCode=e)},null,8,["modelValue"]),u(I,{class:h(["cu-btn bg-green shadow cu-load",l.loading?"loading":""]),disabled:l.loading,onClick:s[11]||(s[11]=e=>b.sendCode(!1))},{default:i((()=>[r("发送验证码")])),_:1},8,["class","disabled"])])),_:1})],64))])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-cfd2a869"]]);export{k as default};
