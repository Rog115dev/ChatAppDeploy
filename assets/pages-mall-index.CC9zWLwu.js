import{_ as s,n as e,C as t,b as a,a as l,w as r,f as i,F as o,g as c,o as d,e as n,c as u,d as h,ac as f,i as g,h as p,S as _,j as m,X as y,t as k}from"./index-CDOpH1f_.js";import{_ as w}from"./points.Cjn_DYqU.js";const b=s({data:()=>({page:1,limit:20,last_id:0,records:[],isRefreshing:!1,points:0}),mounted(){this.getList()},methods:{loadMore(){this.getList()},getList(){this.$api.mallApi.getHomeProducts({page:this.page,limit:this.limit,last_id:this.last_id}).then((s=>{0==s.code&&s.data.data.length>0&&(this.records=[...this.records,...s.data.data],this.records.length>0&&(this.last_id=this.records[this.records.length-1].id))}))},onRefresh(){this.isRefreshing=!0,this.records=[],this.last_id=0,this.getList(),setTimeout((()=>{this.isRefreshing=!1}),1e3)},goAll(){e({url:"/pages/mall/all"})},goDetail(s){e({url:`/pages/mall/detail?id=${s}`})}}},[["render",function(s,e,b,R,x,C){const j=f,v=t("cu-custom"),T=g,B=p,L=_,S=c,A=m,D=y;return d(),a(o,null,[l(v,{bgColor:"bg-video",isBack:!1},{backText:r((()=>[])),content:r((()=>[n("商城")])),right:r((()=>[l(j,{style:{"padding-right":"10px"},url:"/pages/mall/list"},{default:r((()=>[n("购买记录")])),_:1})])),_:1}),l(S,{class:"container",style:i([{height:"calc(100vh - "+(s.CustomBar+s.inlineTools+s.StatusBar)+"px)"}])},{default:r((()=>[l(D,{class:"circle-list-wrapper","show-scrollbar":!1,"scroll-y":"","refresher-enabled":"","refresher-triggered":x.isRefreshing,onRefresherrefresh:C.onRefresh,onScrolltolower:C.loadMore},{default:r((()=>[l(S,{class:"top bg-white-drop"},{default:r((()=>[l(L,{class:"swiper",circular:"","indicator-dots":!0,autoplay:!0,interval:2e3,duration:500},{default:r((()=>[l(B,null,{default:r((()=>[l(T,{src:"/assets/1-Ba5iWVTr.jpg"})])),_:1}),l(B,null,{default:r((()=>[l(T,{src:"/assets/2-oJ7T3QvD.jpg"})])),_:1})])),_:1})])),_:1}),l(S,{class:"product"},{default:r((()=>[l(S,{class:"product-title"},{default:r((()=>[l(S,{class:"product-title-wrapper"},{default:r((()=>[l(A,{class:"line"}),l(A,{class:"circle"}),l(A,{class:"hot"},{default:r((()=>[n("特选兑换")])),_:1}),l(A,{class:"circle"}),l(A,{class:"line"})])),_:1}),l(S,{class:"more text-white",onClick:C.goAll},{default:r((()=>[n("更多 >")])),_:1},8,["onClick"])])),_:1})])),_:1}),0===x.records.length?(d(),u(S,{key:0,class:"empty-state"},{default:r((()=>[l(S,{class:"empty-text"},{default:r((()=>[n("暂无商品")])),_:1})])),_:1})):(d(),u(S,{key:1,class:"product-list"},{default:r((()=>[(d(!0),a(o,null,h(x.records,((s,e)=>(d(),u(S,{class:"product-item",key:e,onClick:e=>C.goDetail(s.id)},{default:r((()=>[l(T,{src:s.img},null,8,["src"]),l(S,{class:"producnt-item-content"},{default:r((()=>[l(A,{class:"item-name"},{default:r((()=>[n(k(s.name),1)])),_:2},1024),l(S,{class:"item-meta"},{default:r((()=>[l(S,{class:"meta-points"},{default:r((()=>[l(T,{src:w}),l(A,null,{default:r((()=>[n(k(s.points),1)])),_:2},1024)])),_:2},1024),l(S,{class:"meta-count"},{default:r((()=>[n("销量："+k(s.count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1},8,["refresher-triggered","onRefresherrefresh","onScrolltolower"])])),_:1},8,["style"])],64)}],["__scopeId","data-v-f00f24c9"]]);export{b as default};
