import{_ as e,u as t,s,p as a,n as i,z as l,G as n,C as r,r as c,c as u,w as o,g as d,o as m,a as _,e as p,b as g,d as f,F as k,m as h,j as y,f as x,t as C,W as b}from"./index-nIaQZq1w.js";import{_ as v}from"./uni-segmented-control.t-6wdOBy.js";import{r as I}from"./uni-app.es.CqmdVAE5.js";import{_ as A}from"./uni-pagination.ClBibMn8.js";import"./uni-icons.DLjypYLm.js";const j=t(s);a(j);const L=e({name:"group",data:()=>({items:["我收到的","我发起的"],current:0,list:[],total:0,params:{page:1,limit:10,is_mine:0}}),created(){},mounted(){this.getList()},methods:{getList(){this.$api.friendApi.applyList(this.params).then((e=>{0==e.code&&(this.list=e.data,this.total=e.count)}))},changePage(e){this.params.page=e.current,this.getList()},onClickItem(e){this.params.is_mine=e.currentIndex,this.current=e.currentIndex,this.params.page=1,this.getList()},sendMsg(e){i({url:"/pages/message/chat?id="+e})},openDetails(e){i({url:"/pages/contacts/detail?id="+e})},searchFriend(){i({url:"/pages/contacts/search"})},optApply(e){l({title:"提示",content:"你确定同意该好友的请求吗",cancelText:"拒绝",cancelColor:"#e54d42",confirmText:"接受",success:t=>{let s=0;t.confirm&&(s=1),this.$api.friendApi.acceptApply({friend_id:e.friend_id,status:s}).then((e=>{0==e.code&&(n({title:"处理成功",icon:"none"}),j.sysUnread--,this.getList())}))}})}}},[["render",function(e,t,s,a,i,l){const n=y,j=d,L=r("cu-custom"),D=I(c("uni-segmented-control"),v),T=b,z=I(c("uni-pagination"),A),F=r("Empty");return m(),u(j,null,{default:o((()=>[_(L,{bgColor:"bg-video",isBack:!0},{backText:o((()=>[])),content:o((()=>[p("新邀请")])),right:o((()=>[_(j,{class:"f-20 ml-10 mr-10",onClick:t[0]||(t[0]=e=>l.searchFriend())},{default:o((()=>[_(n,{class:"cuIcon-add"})])),_:1})])),_:1}),_(D,{activeColor:"#f2cd77",inActiveColor:"#A3A3A4",current:i.current,values:i.items,onClickItem:l.onClickItem,styleType:"text"},null,8,["current","values","onClickItem"]),_(j,{class:"cu-list menu"},{default:o((()=>[i.params.is_mine?h("",!0):(m(!0),g(k,{key:0},f(i.list,((e,t)=>(m(),u(j,{class:"cu-item",key:t},{default:o((()=>[_(j,{class:"cu-avatar md radius mr-15",style:x([{backgroundImage:"url("+e.create_user_info.avatar+")"}])},null,8,["style"]),_(j,{class:"content padding-tb-sm",onClick:t=>l.openDetails(e.create_user_info.user_id)},{default:o((()=>[i.params.is_mine?h("",!0):(m(),u(j,{key:0,class:"text-grey"},{default:o((()=>[_(n,{class:"text-blue"},{default:o((()=>[p(C(e.create_user_info.realname),1)])),_:2},1024),p(" 申请添加您为好友 ")])),_:2},1024)),_(j,{class:"text-gray text-sm lh-15x"},{default:o((()=>[p(C(e.remark),1)])),_:2},1024)])),_:2},1032,["onClick"]),_(j,{class:"action ml-10"},{default:o((()=>[0==e.status?(m(),u(n,{key:0,class:"text-red"},{default:o((()=>[p("已拒绝")])),_:1})):h("",!0),1==e.status?(m(),u(n,{key:1,class:"text-blue",onClick:t=>l.sendMsg(e.create_user_info.user_id)},{default:o((()=>[p("发消息")])),_:2},1032,["onClick"])):h("",!0),2==e.status?(m(),u(T,{key:2,class:"cu-btn round sm bg-green",onClick:t=>l.optApply(e)},{default:o((()=>[p(" 操作 ")])),_:2},1032,["onClick"])):h("",!0)])),_:2},1024)])),_:2},1024)))),128)),i.params.is_mine?(m(!0),g(k,{key:1},f(i.list,((e,t)=>(m(),u(j,{class:"cu-item",key:t},{default:o((()=>[_(j,{class:"cu-avatar md radius mr-15",style:x([{backgroundImage:"url("+e.user_id_info.avatar+")"}])},null,8,["style"]),_(j,{class:"content",onClick:t=>l.openDetails(e.user_id_info.user_id)},{default:o((()=>[_(j,{class:"text-grey"},{default:o((()=>[p(" 请求添加"),_(n,{class:"text-blue"},{default:o((()=>[p(C(e.user_id_info.realname),1)])),_:2},1024),p(" 为好友 ")])),_:2},1024)])),_:2},1032,["onClick"]),_(j,{class:"action ml-10"},{default:o((()=>[0==e.status?(m(),u(n,{key:0,class:"text-red"},{default:o((()=>[p("已拒绝")])),_:1})):h("",!0),1==e.status?(m(),u(n,{key:1,class:"text-blue",onClick:t=>l.sendMsg(e.user_id_info.user_id)},{default:o((()=>[p("发消息")])),_:2},1032,["onClick"])):h("",!0),2==e.status?(m(),u(n,{key:2,class:"text-orange"},{default:o((()=>[p("待同意")])),_:1})):h("",!0)])),_:2},1024)])),_:2},1024)))),128)):h("",!0),i.list.length?(m(),u(j,{key:2,class:"m-10"},{default:o((()=>[_(z,{current:i.params.page,total:i.total,pageSize:i.params.limit,onChange:l.changePage},null,8,["current","total","pageSize","onChange"])])),_:1})):h("",!0),i.list.length?h("",!0):(m(),u(F,{key:3,noDatatext:"暂无群聊",textcolor:"#999"}))])),_:1})])),_:1})}],["__scopeId","data-v-c27de526"]]);export{L as default};
