import{_ as e,q as o,s as a,G as t,x as l,y as r,Z as s,C as n,c as d,w as i,g as c,o as m,a as u,e as g,m as p,i as h,ab as f,W as A,at as F}from"./index-nIaQZq1w.js";import{p as b}from"./package.PDQEWYNF.js";import{_ as C,a as w}from"./lock.DHtl8Wgp.js";import{_ as k}from"./shield-line.D0ecq-vU.js";import{_}from"./img_avatar_default.DQbk7cmi.js";const x=o(a);const E=e({data:()=>({regForm:{account:"",realname:"",password:"",repass:"",code:"",inviteCode:""},placeholder:"请输入账号：4-32个字符",forget:!1,packData:b,globalConfig:x.globalConfig}),watch:{forget(e){e&&(this.regForm.password="123456")}},mounted(){let e=this.globalConfig.sysInfo.regauth??0;1==e?this.placeholder="请输入手机号":2==e?this.placeholder="请输入邮箱账号":3==e&&(this.placeholder="请输入手机号/邮箱")},methods:{handleInput(e){let o=e.detail.value.replace(/[\u4e00-\u9fa5]/g,"");this.regForm.account=o},sendCode(){if(!this.regForm.account)return t({title:"请输入账号！",icon:"none"}),!1;let e={account:this.regForm.account,type:2};this.$api.LoginApi.sendCode(e).then((e=>{t({title:e.msg,icon:"none"})}))},login(){return""==this.regForm.account?(t({title:"请输入账号！",icon:"none"}),!1):""==this.regForm.realname?(t({title:"请输入用户名或者昵称！",icon:"none"}),!1):""==this.regForm.password&&this.regForm.password.length<6&&this.regForm.password>16?(t({title:"请输入6-16位密码！",icon:"none"}),!1):this.regForm.password!=this.regForm.repass?(t({title:"两次密码输入不相同！",icon:"none"}),!1):void this.$api.LoginApi.register(this.regForm).then((e=>{if(0==e.code){this.regForm.rememberMe=!0;let e=l("client_id");e&&(this.regForm.client_id=e),this.$api.LoginApi.login(this.regForm).then((e=>{if(0==e.code){r("authToken",e.data.authToken),r("trtc_appid",e.data.trtc_appid),r("trtc_sign",e.data.trtc_sign);let o=e.data.userInfo;this.socketIo.send({type:"bindUid",user_id:o.user_id,token:e.data.authToken}),x.login(o),s({url:"/pages/index/index"})}}))}}))}}},[["render",function(e,o,a,t,l,r){const s=c,b=n("cu-custom"),x=h,E=f,v=A,I=F;return m(),d(s,{class:"cont"},{default:i((()=>[u(b,{isBack:!0},{backText:i((()=>[])),content:i((()=>[u(s,{class:"tt"},{default:i((()=>[g("账号注册")])),_:1})])),_:1}),u(s,{class:"ctn"},{default:i((()=>[u(I,{class:"ifc"},{default:i((()=>[u(s,{class:"cu-form-group cu-form-border-bottom"},{default:i((()=>[u(s,{class:"title"},{default:i((()=>[u(x,{src:C,mode:"widthFix"})])),_:1}),u(E,{placeholder:"请输入账号",maxlength:"32",name:"input",modelValue:l.regForm.account,"onUpdate:modelValue":o[0]||(o[0]=e=>l.regForm.account=e)},null,8,["modelValue"])])),_:1}),u(s,{class:"cu-form-group cu-form-border-bottom"},{default:i((()=>[u(s,{class:"title"},{default:i((()=>[u(x,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA2xJREFUWEftmD9oFEEUxn/vsEhhkSKihUKKCCkUDaYIKKggJGCEFIKCglqp2ChEsNC7uaiVdlooWqRQ1EpFC62MqEXQYARBwYApUgS0SGEhJOS5b3cvbpK729k9DoJmYJvdN/N982b2e3+EFT5khfPjPyDodA1CL0oPBTqAOeaZQhhBeY2T342cUmMeLOuRANxBSKzamAIGKcmjvCTzE3R6DWHQC1i5jpPzXrZLjPIRdHoZ4eKStaZQxsN3wnZg46LvyhWcXMpKMjvBId22QCRCmwmesyj3cTK3QKCsh4CbwdMWv5tD2EVRRrOQzE7Q6WOEgRjkN0IPRflUFdTpFoT3QEv4XXmOkwPNI+i0FeEHsCYGcZSkXBewrKX4RzKzOZR1ODGve41sHnS6B+HVwsrKZpxM1EVy2oHwLTFnL05GvNiF1znLcDqA8HhhSknS50c6OZuAGaAkT31h0wGSK+UhaPPLqqsEQw+senD5zfzn7mA/wrOEZJim/UyRmbZYOytmfZTkZbP+4naE74nFj1KS+ylCbRnPvcSmNuHEshyvke2II8n4AnTGq39F6aqZ8zltQfiYsB8PNLDLi1lslIfgMWA44ZEXwAmcTC8CdmpJwgOEfYn3pyjJ7eYStMgAb8Ik4e+YQRlG+BC+UroRjgOtiY28BSzM/c14PJhm92Ckh5brGcl2DwwjbPHayHnfvcq6+QhGJO0IbyAcrktSeRJfAe8MJrlefoKVVZx2A2eCImlPIoueRHlLgWGK8trLyzWMGifYCLrH3FWCHk6qa5Lfg5HcdAahbwdKBwU2xLJiMvKLeaYRJlDGcPI5L9HsBId0N/McDzSvP1GxpeFPB52HF8EmbjWvqiurtTfcEoFOI1btu9XOVmx5pf3pHryq65nlbuyxaoB2pCYrJsZRH6bAWjQs3K0lUqkAF89VHgLnloXIJQj1CQ6p3S8T2sVdAivWlbsUeM48o3WShbWA6WRvHPrsnibHJMJBijJW6yhqExzSneG9AQOpDEsILizrIvgcdJTZnAznE/5QlfELoY+ivKu2THWCFmujNKnStrB4akdyOkvRXZW3Ff9wJ/RccuPK1mrJb20PlnU/ymAcwtI7CD5eTNpUOg7KCAVcrZCY/pM4bcfJZFZ8L3vr3aRoZDpBL6TmGa0SbNS3fwAOKBQ467exrQAAAABJRU5ErkJggg==",mode:"widthFix"})])),_:1}),u(E,{placeholder:"用户名/昵称",maxlength:"32",name:"input",modelValue:l.regForm.realname,"onUpdate:modelValue":o[1]||(o[1]=e=>l.regForm.realname=e)},null,8,["modelValue"])])),_:1}),parseInt(l.globalConfig.sysInfo.regauth)?(m(),d(s,{key:0,class:"cu-form-group cu-form-border-bottom"},{default:i((()=>[u(s,{class:"title"},{default:i((()=>[u(x,{src:k,mode:"widthFix"})])),_:1}),u(E,{placeholder:"请输入验证码",maxlength:"6",name:"input",modelValue:l.regForm.code,"onUpdate:modelValue":o[2]||(o[2]=e=>l.regForm.code=e)},null,8,["modelValue"]),u(v,{class:"cu-btn bg-blue shadow btn-code",onClick:r.sendCode},{default:i((()=>[g("发送验证码")])),_:1},8,["onClick"])])),_:1})):p("",!0),l.forget?p("",!0):(m(),d(s,{key:1,class:"cu-form-group cu-form-border-bottom"},{default:i((()=>[u(s,{class:"title"},{default:i((()=>[u(x,{src:w,mode:"widthFix"})])),_:1}),u(E,{placeholder:"请输入密码",maxlength:"32",type:"password",name:"input",modelValue:l.regForm.password,"onUpdate:modelValue":o[3]||(o[3]=e=>l.regForm.password=e)},null,8,["modelValue"])])),_:1})),l.forget?p("",!0):(m(),d(s,{key:2,class:"cu-form-group cu-form-border-bottom"},{default:i((()=>[u(s,{class:"title"},{default:i((()=>[u(x,{src:w,mode:"widthFix"})])),_:1}),u(E,{placeholder:"请输入重复密码",maxlength:"32",type:"password",name:"input",modelValue:l.regForm.repass,"onUpdate:modelValue":o[4]||(o[4]=e=>l.regForm.repass=e)},null,8,["modelValue"])])),_:1})),l.forget?p("",!0):(m(),d(s,{key:3,class:"cu-form-group cu-form-border-bottom"},{default:i((()=>[u(s,{class:"title"},{default:i((()=>[u(x,{src:_,mode:"widthFix"})])),_:1}),u(E,{placeholder:"邀请码",maxlength:"32",name:"input",modelValue:l.regForm.inviteCode,"onUpdate:modelValue":o[5]||(o[5]=e=>l.regForm.inviteCode=e)},null,8,["modelValue"])])),_:1}))])),_:1}),u(s,{class:"flex flex-direction im-login-btn"},{default:i((()=>[u(v,{class:"cu-btn lg bg-login",onClick:o[6]||(o[6]=e=>r.login())},{default:i((()=>[g("注册")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-325f00d5"]]);export{E as default};
