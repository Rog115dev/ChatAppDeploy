import{_ as e,C as s,b as t,a,w as r,F as o,g as i,o as l,e as d,c,d as n,j as h,X as g,t as f,l as u,i as _}from"./index-BWCeDMGH.js";import{_ as m}from"./points.Cjn_DYqU.js";const p=e({data:()=>({isRefreshing:!1,records:[],page:1,limit:20,last_id:0}),onShow(){this.getLog()},methods:{getLog(){this.$api.activityApi.getPointsLog({page:this.page,limit:this.limit,last_id:this.last_id}).then((e=>{0==e.code&&e.data.data.length>0&&(this.records=[...this.records,...e.data.data],this.records.length>0&&(this.last_id=this.records[this.records.length-1].id))}))},loadMore(){console.log("加载更多"),this.getLog()},onRefresh(){this.isRefreshing=!0,this.records=[],this.last_id=0,this.getLog(),setTimeout((()=>{this.isRefreshing=!1}),1e3)}}},[["render",function(e,p,y,R,w,b){const k=s("cu-custom"),x=h,L=_,j=i,S=g;return l(),t(o,null,[a(k,{bgColor:"bg-gradual-green",isBack:!0},{backText:r((()=>[])),content:r((()=>[d("积分明细")])),right:r((()=>[])),_:1}),a(j,{class:"container"},{default:r((()=>[a(S,{class:"record-list","scroll-y":"",onScrolltolower:b.loadMore,onRefresherrefresh:b.onRefresh,"refresher-enabled":"","refresher-triggered":w.isRefreshing},{default:r((()=>[w.records.length>0?(l(),c(j,{key:0},{default:r((()=>[(l(!0),t(o,null,n(w.records,((e,s)=>(l(),c(j,{class:"record-item",key:s},{default:r((()=>[a(j,{class:"record-row"},{default:r((()=>[a(x,{class:"time"},{default:r((()=>[d(f(e.create_time),1)])),_:2},1024),a(j,{class:u(["detail-row",["amount",0==e.type?"expense":"income"]])},{default:r((()=>[d(f(0==e.type?"-":"+")+" ",1),a(L,{src:m}),d(" "+f(e.points),1)])),_:2},1032,["class"])])),_:2},1024),a(j,{class:"record-row"},{default:r((()=>[a(j,{class:"type-tag"},{default:r((()=>[a(x,null,{default:r((()=>[d(f(e.detail),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(l(),c(j,{key:1,class:"empty-state"},{default:r((()=>[a(x,{class:"empty-text"},{default:r((()=>[d("暂无交易记录")])),_:1})])),_:1}))])),_:1},8,["onScrolltolower","onRefresherrefresh","refresher-triggered"])])),_:1})],64)}],["__scopeId","data-v-ea90aa06"]]);export{p as default};
