import{_ as e,q as s,s as a,G as l,n as o,a4 as t,C as n,r as u,b as p,a as d,w as r,F as i,g as c,o as m,e as _,c as f,l as h,m as g,j as y,ab as b}from"./index-BWCeDMGH.js";import{_ as k}from"./uni-icons.V_6hCn98.js";import{r as w}from"./uni-app.es.BSjB11UY.js";import{_ as C}from"./uni-popup.B0pKJk65.js";import{p as V}from"./uni-keyword.BM-SZ3ZA.js";const P=s(a);const U=e({components:{payKeyboard:V},data:()=>({password:"",set_msg:"请输入交易密码",show_key:!0,set_info:"",typeClass:"luck",number:"",money:"",luckMoney:"",blessing:"",click:!0,disable:!1,page_params:{},redEnvelopeData:{},defaultBless:"恭喜发财,大吉大利"}),onLoad(e){let s=this;s.page_params=e,1==s.page_params.is_group?this.typeClass="luck":(s.number=1,s.disable=!0,this.typeClass="normal")},onShow(){P.userInfo.trans||(l({title:"请先设置交易密码",icon:"none"}),setTimeout((()=>{o({url:"/pages/mine/secure"})}),1500))},methods:{switchType(e){if(0==this.page_params.msg_type)return!1;this.typeClass=e},closeCouponPopup(){this.$refs.popup.close()},hand(e){let s={type:"luck"==e?2:1,num:this.number,hongbao_msg:this.blessing,amount:this.money};return"luck"==e&&(s.amount=this.luckMoney),!s.amount||s.amount<=0?l({title:"金额不能为空",icon:"none"}):s.num!=Math.abs(parseInt(s.num))?l({title:"数量填写大于0的整数",icon:"none"}):(s.hongbao_msg=s.hongbao_msg||this.defaultBless,s=Object.assign(this.page_params,s),s.id=this.$util.getUuid(),s.fromUser=P.userInfo,this.redEnvelopeData=s,void this.$refs.popup.open())},hideFun(){this.closeCouponPopup()},getPassword(e){this.redEnvelopeData.trans=e.password,this.$api.msgApi.createHongBao(this.redEnvelopeData).then((e=>{0==e.code?t():(this.closeCouponPopup(),l({title:e.msg,icon:"none"}))})).catch((e=>{}))}}},[["render",function(e,s,a,l,o,t){const V=y,P=n("cu-custom"),U=c,j=b,v=w(u("uni-icons"),k),x=n("pay-keyboard"),B=w(u("uni-popup"),C);return m(),p(i,null,[d(P,{bgColor:"bg-video",isBack:!0},{backText:r((()=>[])),content:r((()=>[d(V,{class:"hb-title"},{default:r((()=>[_("发红包")])),_:1})])),right:r((()=>[])),_:1}),d(U,null,{default:r((()=>[1==o.page_params.is_group?(m(),f(U,{key:0,class:"tabr"},{default:r((()=>[d(U,{class:h({on:"luck"==o.typeClass}),onClick:s[0]||(s[0]=e=>t.switchType("luck"))},{default:r((()=>[_("拼手气红包")])),_:1},8,["class"]),d(U,{class:h({on:"normal"==o.typeClass}),onClick:s[1]||(s[1]=e=>t.switchType("normal"))},{default:r((()=>[_("普通红包")])),_:1},8,["class"]),d(U,{class:h(["border",o.typeClass])},null,8,["class"])])),_:1})):g("",!0),d(U,{class:h(["content",o.typeClass])},{default:r((()=>[d(U,{class:"luck"},{default:r((()=>[d(U,{class:"row"},{default:r((()=>[d(U,{class:"term"},{default:r((()=>[_(" 红包个数 ")])),_:1}),d(U,{class:"input"},{default:r((()=>[d(j,{type:"number",modelValue:o.number,"onUpdate:modelValue":s[2]||(s[2]=e=>o.number=e),placeholder:"输入红包个数"},null,8,["modelValue"]),_(" 个 ")])),_:1})])),_:1}),d(U,{class:"row"},{default:r((()=>[d(U,{class:"term"},{default:r((()=>[_(" 总金额 ")])),_:1}),d(U,{class:"input"},{default:r((()=>[d(j,{type:"number",modelValue:o.luckMoney,"onUpdate:modelValue":s[3]||(s[3]=e=>o.luckMoney=e),placeholder:"输入金额"},null,8,["modelValue"]),_(" 元 ")])),_:1})])),_:1}),d(U,{class:"tis"},{default:r((()=>[_(" 小伙伴领取的金额随机 ")])),_:1}),d(U,{class:"blessing"},{default:r((()=>[d(j,{type:"text",maxlength:"12",placeholder:"恭喜发财",modelValue:o.blessing,"onUpdate:modelValue":s[4]||(s[4]=e=>o.blessing=e)},null,8,["modelValue"])])),_:1}),d(U,{class:"hand",onClick:s[5]||(s[5]=e=>t.hand("luck"))},{default:r((()=>[_(" 发红包 ")])),_:1})])),_:1}),d(U,{class:"normal"},{default:r((()=>[d(U,{class:"row"},{default:r((()=>[d(U,{class:"term"},{default:r((()=>[_(" 红包个数 ")])),_:1}),d(U,{class:"input"},{default:r((()=>[d(j,{type:"number",disabled:o.disable,modelValue:o.number,"onUpdate:modelValue":s[6]||(s[6]=e=>o.number=e),placeholder:"输入红包个数"},null,8,["disabled","modelValue"]),_(" 个 ")])),_:1})])),_:1}),d(U,{class:"row"},{default:r((()=>[d(U,{class:"term"},{default:r((()=>[_(" 单个金额 ")])),_:1}),d(U,{class:"input"},{default:r((()=>[d(j,{type:"number",modelValue:o.money,"onUpdate:modelValue":s[7]||(s[7]=e=>o.money=e),placeholder:"输入金额"},null,8,["modelValue"]),_(" 元 ")])),_:1})])),_:1}),1==o.page_params.is_group?(m(),f(U,{key:0,class:"tis"},{default:r((()=>[_(" 小伙伴领取的金额相同 ")])),_:1})):g("",!0),d(U,{class:"blessing"},{default:r((()=>[d(j,{type:"text",maxlength:"12",placeholder:o.defaultBless,modelValue:o.blessing,"onUpdate:modelValue":s[8]||(s[8]=e=>o.blessing=e)},null,8,["placeholder","modelValue"])])),_:1}),d(U,{class:"hand",onClick:s[9]||(s[9]=e=>t.hand("normal"))},{default:r((()=>[_(" 发红包 ")])),_:1})])),_:1})])),_:1},8,["class"]),d(B,{ref:"popup",type:"center"},{default:r((()=>[d(U,{class:"popup-content"},{default:r((()=>[d(U,{class:"popup-header"},{default:r((()=>[d(V,{class:"popup-title"},{default:r((()=>[_("输入交易密码")])),_:1}),d(v,{type:"closeempty",size:"20",color:"#666",onClick:t.closeCouponPopup},null,8,["onClick"])])),_:1}),d(x,{set_info:o.set_info,show_key:o.show_key,ref:"payKeyboard",set_msg:o.set_msg,onHideFun:t.hideFun,onGetPassword:t.getPassword,password:o.password},null,8,["set_info","show_key","set_msg","onHideFun","onGetPassword","password"])])),_:1})])),_:1},512)])),_:1})],64)}],["__scopeId","data-v-feefb00f"]]);export{U as default};
