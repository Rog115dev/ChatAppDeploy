import{_ as e}from"./uni-segmented-control.CNVRY4ha.js";import{_ as s,C as t,r,b as a,a as l,w as i,f as d,F as o,g as c,o as n,e as h,c as u,d as f,X as g,t as m,i as _,j as p}from"./index-CDOpH1f_.js";import{r as w}from"./uni-app.es.DwBKReRU.js";const k=s({data:()=>({page:1,limit:20,last_id:0,records:[],isRefreshing:!1,current:0,items:["待发放","已发放"]}),onShow(){this.getList()},methods:{onClickItem(e){this.current!=e.currentIndex&&(this.current=e.currentIndex,this.records=[],this.last_id=0,this.getList())},loadMore(){this.getList()},getList(){this.$api.drawApi.drawList({page:this.page,limit:this.limit,last_id:this.last_id,status:this.current}).then((e=>{0==e.code&&e.data.data.length>0&&(this.records=[...this.records,...e.data.data],this.records.length>0&&(this.last_id=this.records[this.records.length-1].id))}))},onRefresh(){this.isRefreshing=!0,this.records=[],this.last_id=0,this.getList(),setTimeout((()=>{this.isRefreshing=!1}),1e3)}}},[["render",function(s,k,y,b,R,x){const C=t("cu-custom"),I=w(r("uni-segmented-control"),e),L=c,j=_,v=p,S=g;return n(),a(o,null,[l(C,{bgColor:"bg-gradual-green",isBack:!0},{backText:i((()=>[])),content:i((()=>[h("中奖记录")])),right:i((()=>[])),_:1}),l(L,{class:"container",style:d({height:`calc(100% - ${s.CustomBar}px)`})},{default:i((()=>[l(S,{class:"circle-list-wrapper","show-scrollbar":!1,"scroll-y":"","refresher-enabled":"","refresher-triggered":R.isRefreshing,onRefresherrefresh:x.onRefresh,onScrolltolower:x.loadMore},{default:i((()=>[l(L,{class:"segmented-wrapper"},{default:i((()=>[l(I,{current:R.current,values:R.items,onClickItem:x.onClickItem},null,8,["current","values","onClickItem"])])),_:1}),0===R.records.length?(n(),u(L,{key:0,class:"empty-state"},{default:i((()=>[l(L,{class:"empty-text"},{default:i((()=>[h("暂无记录")])),_:1})])),_:1})):(n(),u(L,{key:1,class:"order-list"},{default:i((()=>[(n(!0),a(o,null,f(R.records,((e,s)=>(n(),u(L,{class:"order-item",key:s},{default:i((()=>[l(L,{class:"order-body"},{default:i((()=>[l(j,{src:e.img},null,8,["src"]),l(L,{class:"order-desc"},{default:i((()=>[l(v,null,{default:i((()=>[h(m(e.name),1)])),_:2},1024),l(L,{class:"detail-wrapper"},{default:i((()=>[l(L,{class:"detail"},{default:i((()=>[l(v,null,{default:i((()=>[h("中奖时间")])),_:1}),l(v,null,{default:i((()=>[h(m(e.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}))])),_:1},8,["refresher-triggered","onRefresherrefresh","onScrolltolower"])])),_:1},8,["style"])],64)}],["__scopeId","data-v-bafc5799"]]);export{k as default};
