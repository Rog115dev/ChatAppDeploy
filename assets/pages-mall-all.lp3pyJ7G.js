var t,e;import{a0 as r,E as n,D as i,G as s,n as o,ah as a,a1 as l,Z as c,a4 as u,T as h,v as d,_ as p,o as g,c as f,w as m,aa as b,g as y,e as v,t as S,l as $,f as w,m as _,j as x,r as T,a as k,b as j,F as I,d as A,U as N,X as P,A as M,B as O,C as D,i as R}from"./index-BWCeDMGH.js";import{r as B}from"./uni-app.es.BSjB11UY.js";import{_ as C}from"./points.Cjn_DYqU.js";const Z={};function H(t){return/^[\+-]?(\d+\.?\d*|\.\d+|\d\.\d+e\+\d+)$/.test(t)}function E(t){switch(typeof t){case"undefined":return!0;case"string":if(0==t.replace(/(^[ \t\n\r]*)|([ \t\n\r]*$)/g,"").length)return!0;break;case"boolean":if(!t)return!0;break;case"number":if(0===t||isNaN(t))return!0;break;case"object":if(null===t||0===t.length)return!0;for(const e in t)return!1;return!0}return!1}function z(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function F(t){return"[object Object]"===Object.prototype.toString.call(t)}function L(t){return"function"==typeof t}const V=Object.freeze(Object.defineProperty({__proto__:null,amount:function(t){return/^[1-9]\d*(,\d{3})*(\.\d{1,2})?$|^0\.\d{1,2}$/.test(t)},array:z,carNo:function(t){const e=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}(([0-9]{5}[DF]$)|([DF][A-HJ-NP-Z0-9][0-9]{4}$))/,r=/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]{1}$/;return 7===t.length?r.test(t):8===t.length&&e.test(t)},chinese:function(t){return/^[\u4e00-\u9fa5]+$/gi.test(t)},code:function(t,e=6){return new RegExp(`^\\d{${e}}$`).test(t)},contains:function(t,e){return t.indexOf(e)>=0},date:function(t){return!!t&&(H(t)&&(t=+t),!/Invalid|NaN/.test(new Date(t).toString()))},dateISO:function(t){return/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},digits:function(t){return/^\d+$/.test(t)},email:function(t){return/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(t)},empty:E,enOrNum:function(t){return/^[0-9a-zA-Z]*$/g.test(t)},func:L,idCard:function(t){return/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t)},image:function(t){const e=t.split("?")[0];return/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i.test(e)},jsonString:function(t){if("string"==typeof t)try{const e=JSON.parse(t);return!("object"!=typeof e||!e)}catch(e){return!1}return!1},landline:function(t){return/^\d{3,4}-\d{7,8}(-\d{3,4})?$/.test(t)},letter:function(t){return/^[a-zA-Z]*$/.test(t)},mobile:function(t){return/^1([3589]\d|4[5-9]|6[1-2,4-7]|7[0-8])\d{8}$/.test(t)},number:H,object:F,promise:function(t){return F(t)&&L(t.then)&&L(t.catch)},range:function(t,e){return t>=e[0]&&t<=e[1]},rangeLength:function(t,e){return t.length>=e[0]&&t.length<=e[1]},regExp:function(t){return t&&"[object RegExp]"===Object.prototype.toString.call(t)},string:function(t){return"string"==typeof t},url:function(t){return/^((https|http|ftp|rtsp|mms):\/\/)(([0-9a-zA-Z_!~*'().&=+$%-]+: )?[0-9a-zA-Z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-zA-Z_!~*'()-]+.)*([0-9a-zA-Z][0-9a-zA-Z-]{0,61})?[0-9a-zA-Z].[a-zA-Z]{2,6})(:[0-9]{1,4})?((\/?)|(\/[0-9a-zA-Z_!~*'().;?:@&=+$,%#-]+)+\/?)$/.test(t)},video:function(t){return/\.(mp4|mpg|mpeg|dat|asf|avi|rm|rmvb|mov|wmv|flv|mkv|m3u8)/i.test(t)}},Symbol.toStringTag,{value:"Module"}));function G(t,e=15){return+parseFloat(Number(t).toPrecision(e))}function X(t){const e=t.toString().split(/[eE]/),r=(e[0].split(".")[1]||"").length-+(e[1]||0);return r>0?r:0}function U(t){if(-1===t.toString().indexOf("e"))return Number(t.toString().replace(".",""));const e=X(t);return e>0?G(Number(t)*Math.pow(10,e)):Number(t)}function q(t){(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(`${t} 超出了精度限制，结果可能不正确`)}function J(t,e){const[r,n,...i]=t;let s=e(r,n);return i.forEach((t=>{s=e(s,t)})),s}function W(...t){if(t.length>2)return J(t,W);const[e,r]=t,n=U(e),i=U(r),s=X(e)+X(r),o=n*i;return q(o),o/Math.pow(10,s)}function Y(...t){if(t.length>2)return J(t,Y);const[e,r]=t,n=U(e),i=U(r);return q(n),q(i),W(n/i,G(Math.pow(10,X(r)-X(e))))}function K(t){let e=this.$parent;for(;e;){if(!e.$options||e.$options.name===t)return e;e=e.$parent}return!1}function Q(t,e=new WeakMap){if(null===t||"object"!=typeof t)return t;if(e.has(t))return e.get(t);let r;if(t instanceof Date)r=new Date(t.getTime());else if(t instanceof RegExp)r=new RegExp(t);else if(t instanceof Map)r=new Map(Array.from(t,(([t,r])=>[t,Q(r,e)])));else if(t instanceof Set)r=new Set(Array.from(t,(t=>Q(t,e))));else if(Array.isArray(t))r=t.map((t=>Q(t,e)));else if("[object Object]"===Object.prototype.toString.call(t)){r=Object.create(Object.getPrototypeOf(t)),e.set(t,r);for(const[n,i]of Object.entries(t))r[n]=Q(i,e)}else r=Object.assign({},t);return e.set(t,r),r}function tt(t={},e={}){if("object"!=typeof(t=Q(t))||null===t||"object"!=typeof e||null===e)return t;const r=Array.isArray(t)?t.slice():Object.assign({},t);for(const n in e){if(!e.hasOwnProperty(n))continue;const t=e[n],i=r[n];t instanceof Date?r[n]=new Date(t):t instanceof RegExp?r[n]=new RegExp(t):t instanceof Map?r[n]=new Map(t):t instanceof Set?r[n]=new Set(t):r[n]="object"==typeof t&&null!==t?tt(i,t):t}return r}function et(t=null,e="yyyy-mm-dd"){let r;r=t?/^\d{10}$/.test(null==t?void 0:t.toString().trim())?new Date(1e3*t):"string"==typeof t&&/^\d+$/.test(t.trim())?new Date(Number(t)):"string"==typeof t&&t.includes("-")&&!t.includes("T")?new Date(t.replace(/-/g,"/")):new Date(t):new Date;const n={y:r.getFullYear().toString(),m:(r.getMonth()+1).toString().padStart(2,"0"),d:r.getDate().toString().padStart(2,"0"),h:r.getHours().toString().padStart(2,"0"),M:r.getMinutes().toString().padStart(2,"0"),s:r.getSeconds().toString().padStart(2,"0")};for(const i in n){const[t]=new RegExp(`${i}+`).exec(e)||[];if(t){const r="y"===i&&2===t.length?2:0;e=e.replace(t,n[i].slice(r))}}return e}function rt(t,e="both"){return t=String(t),"both"==e?t.replace(/^\s+|\s+$/g,""):"left"==e?t.replace(/^\s*/,""):"right"==e?t.replace(/(\s*$)/g,""):"all"==e?t.replace(/\s+/g,""):t}function nt(t={},e=!0,r="brackets"){const n=e?"?":"",i=[];-1==["indices","brackets","repeat","comma"].indexOf(r)&&(r="brackets");for(const s in t){const e=t[s];if(!(["",void 0,null].indexOf(e)>=0))if(e.constructor===Array)switch(r){case"indices":for(let r=0;r<e.length;r++)i.push(`${s}[${r}]=${e[r]}`);break;case"brackets":default:e.forEach((t=>{i.push(`${s}[]=${t}`)}));break;case"repeat":e.forEach((t=>{i.push(`${s}=${t}`)}));break;case"comma":let t="";e.forEach((e=>{t+=(t?",":"")+e})),i.push(`${s}=${t}`)}else i.push(`${s}=${e}`)}return i.length?n+i.join("&"):""}function it(){var t;const e=r(),n=null==(t=e[e.length-1])?void 0:t.route;return`/${n||""}`}String.prototype.padStart||(String.prototype.padStart=function(t,e=" "){if("[object String]"!==Object.prototype.toString.call(e))throw new TypeError("fillString must be String");const r=this;if(r.length>=t)return String(r);const n=t-r.length;let i=Math.ceil(n/e.length);for(;i>>=1;)e+=e,1===i&&(e+=e);return e.slice(0,n)+r});const st=Object.freeze(Object.defineProperty({__proto__:null,$parent:K,addStyle:function(t,e="object"){if(E(t)||"object"==typeof t&&"object"===e||"string"===e&&"string"==typeof t)return t;if("object"===e){const e=(t=rt(t)).split(";"),r={};for(let t=0;t<e.length;t++)if(e[t]){const n=e[t].split(":");r[rt(n[0])]=rt(n[1])}return r}let r="";for(const n in t){r+=`${n.replace(/([A-Z])/g,"-$1").toLowerCase()}:${t[n]};`}return rt(r)},addUnit:function(t="auto",e=((t=>{return null==(t=null==(e=null==uni?void 0:uni.$uv)?void 0:e.config)?void 0:t.unit;var e})()?(t=>{return null==(t=null==(e=null==uni?void 0:uni.$uv)?void 0:e.config)?void 0:t.unit;var e})():"px")){return H(t=String(t))?`${t}${e}`:t},deepClone:Q,deepMerge:tt,error:function(t){},formValidate:function(t,e){const r=K.call(t,"uv-form-item"),n=K.call(t,"uv-form");r&&n&&n.validateField(r.prop,(()=>{}),e)},getDuration:function(t,e=!0){const r=parseInt(t);return e?/s$/.test(t)?t:t>30?`${t}ms`:`${t}s`:/ms$/.test(t)?r:/s$/.test(t)?r>30?r:1e3*r:r},getHistoryPage:function(t=0){const e=r();return e[e.length-1+t]},getProperty:function(t,e){if(t){if("string"!=typeof e||""===e)return"";if(-1!==e.indexOf(".")){const r=e.split(".");let n=t[r[0]]||{};for(let t=1;t<r.length;t++)n&&(n=n[r[t]]);return n}return t[e]}},getPx:function(t,e=!1){return H(t)?e?`${t}px`:Number(t):/(rpx|upx)$/.test(t)?e?`${n(parseInt(t))}px`:Number(n(parseInt(t))):e?`${parseInt(t)}px`:parseInt(t)},guid:function(t=32,e=!0,r=null){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(r=r||n.length,t)for(let s=0;s<t;s++)i[s]=n[0|Math.random()*r];else{let t;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(let e=0;e<36;e++)i[e]||(t=0|16*Math.random(),i[e]=n[19==e?3&t|8:t])}return e?(i.shift(),`u${i.join("")}`):i.join("")},os:function(){return i().platform.toLowerCase()},padZero:function(t){return`00${t}`.slice(-2)},page:it,pages:function(){return r()},priceFormat:function(t,e=0,r=".",n=","){t=`${t}`.replace(/[^0-9+-Ee.]/g,"");const i=isFinite(+t)?+t:0,s=isFinite(+e)?Math.abs(e):0,o=void 0===n?",":n,a=void 0===r?".":r;let l="";l=(s?function(t,e){const r=Math.pow(10,e);let n=Y(Math.round(Math.abs(W(t,r))),r);return t<0&&0!==n&&(n=W(n,-1)),n}(i,s)+"":`${Math.round(i)}`).split(".");const c=/(-?\d+)(\d{3})/;for(;c.test(l[0]);)l[0]=l[0].replace(c,`$1${o}$2`);return(l[1]||"").length<s&&(l[1]=l[1]||"",l[1]+=new Array(s-l[1].length+1).join("0")),l.join(a)},queryParams:nt,random:function(t,e){if(t>=0&&e>0&&e>=t){const r=e-t+1;return Math.floor(Math.random()*r+t)}return 0},randomArray:function(t=[]){return t.sort((()=>Math.random()-.5))},range:function(t=0,e=0,r=0){return Math.max(t,Math.min(e,Number(r)))},setConfig:function({props:t={},config:e={},color:r={},zIndex:n={}}){const{deepMerge:i}=uni.$uv;uni.$uv.config=i(uni.$uv.config,e),uni.$uv.props=i(uni.$uv.props,t),uni.$uv.color=i(uni.$uv.color,r),uni.$uv.zIndex=i(uni.$uv.zIndex,n)},setProperty:function(t,e,r){if(!t)return;const n=function(t,e,r){if(1!==e.length)for(;e.length>1;){const i=e[0];t[i]&&"object"==typeof t[i]||(t[i]={}),e.shift(),n(t[i],e,r)}else t[e[0]]=r};if("string"!=typeof e||""===e);else if(-1!==e.indexOf(".")){const i=e.split(".");n(t,i,r)}else t[e]=r},sleep:function(t=30){return new Promise((e=>{setTimeout((()=>{e()}),t)}))},sys:function(){return i()},timeFormat:et,timeFrom:function(t=null,e="yyyy-mm-dd"){null==t&&(t=Number(new Date)),10==(t=parseInt(t)).toString().length&&(t*=1e3);let r=(new Date).getTime()-t;r=parseInt(r/1e3);let n="";switch(!0){case r<300:n="刚刚";break;case r>=300&&r<3600:n=`${parseInt(r/60)}分钟前`;break;case r>=3600&&r<86400:n=`${parseInt(r/3600)}小时前`;break;case r>=86400&&r<2592e3:n=`${parseInt(r/86400)}天前`;break;default:n=!1===e?r>=2592e3&&r<31536e3?`${parseInt(r/2592e3)}个月前`:`${parseInt(r/31536e3)}年前`:et(t,e)}return n},toast:function(t,e=2e3){s({title:String(t),icon:"none",duration:e})},trim:rt,type2icon:function(t="success",e=!1){-1==["primary","info","error","warning","success"].indexOf(t)&&(t="success");let r="";switch(t){case"primary":case"info":r="info-circle";break;case"error":r="close-circle";break;case"warning":r="error-circle";break;default:r="checkmark-circle"}return e&&(r+="-fill"),r}},Symbol.toStringTag,{value:"Module"}));const ot=(new class{constructor(){this.config={type:"navigateTo",url:"",delta:1,params:{},animationType:"pop-in",animationDuration:300,intercept:!1,events:{}},this.route=this.route.bind(this)}addRootPath(t){return"/"===t[0]?t:`/${t}`}mixinParam(t,e){t=t&&this.addRootPath(t);let r="";return/.*\/.*\?.*=.*/.test(t)?(r=nt(e,!1),t+`&${r}`):(r=nt(e),t+r)}async route(t={},e={}){let r={};if("string"==typeof t?(r.url=this.mixinParam(t,e),r.type="navigateTo"):(r=tt(this.config,t),r.url=this.mixinParam(t.url,t.params)),r.url!==it())if(e.intercept&&(r.intercept=e.intercept),r.params=e,r=tt(this.config,r),"function"==typeof r.intercept){await new Promise(((t,e)=>{r.intercept(r,t)}))&&this.openPage(r)}else this.openPage(r)}openPage(t){const{url:e,type:r,delta:n,animationType:i,animationDuration:s,events:h}=t;"navigateTo"!=t.type&&"to"!=t.type||o({url:e,animationType:i,animationDuration:s,events:h}),"redirectTo"!=t.type&&"redirect"!=t.type||a({url:e}),"switchTab"!=t.type&&"tab"!=t.type||l({url:e}),"reLaunch"!=t.type&&"launch"!=t.type||c({url:e}),"navigateBack"!=t.type&&"back"!=t.type||u({delta:n})}}).route;let at,lt=null;function ct(t,e=500,r=!1){if(null!==lt&&clearTimeout(lt),r){const r=!lt;lt=setTimeout((()=>{lt=null}),e),r&&"function"==typeof t&&t()}else lt=setTimeout((()=>{"function"==typeof t&&t()}),e)}function ut(t,e=500,r=!0){r?at||(at=!0,"function"==typeof t&&t(),setTimeout((()=>{at=!1}),e)):at||(at=!0,setTimeout((()=>{at=!1,"function"==typeof t&&t()}),e))}const ht={props:{customStyle:{type:[Object,String],default:()=>({})},customClass:{type:String,default:""},url:{type:String,default:""},linkType:{type:String,default:"navigateTo"}},data:()=>({}),onLoad(){this.$uv.getRect=this.$uvGetRect},created(){this.$uv.getRect=this.$uvGetRect},computed:{$uv(){var t,e;return{...st,test:V,route:ot,debounce:ct,throttle:ut,unit:null==(e=null==(t=null==uni?void 0:uni.$uv)?void 0:t.config)?void 0:e.unit}},bem:()=>function(t,e,r){const n=`uv-${t}--`,i={};return e&&e.map((t=>{i[n+this[t]]=!0})),r&&r.map((t=>{this[t]?i[n+t]=this[t]:delete i[n+t]})),Object.keys(i)}},methods:{openPage(t="url"){const e=this[t];e&&uni[this.linkType]({url:e})},$uvGetRect(t,e){return new Promise((r=>{h().in(this)[e?"selectAll":"select"](t).boundingClientRect((t=>{e&&Array.isArray(t)&&t.length&&r(t),!e&&t&&r(t)})).exec()}))},getParentData(t=""){this.parent||(this.parent={}),this.parent=this.$uv.$parent.call(this,t),this.parent.children&&-1===this.parent.children.indexOf(this)&&this.parent.children.push(this),this.parent&&this.parentData&&Object.keys(this.parentData).map((t=>{this.parentData[t]=this.parent[t]}))},preventEvent(t){t&&"function"==typeof t.stopPropagation&&t.stopPropagation()},noop(t){this.preventEvent(t)}},onReachBottom(){d("uvOnReachBottom")},beforeDestroy(){if(this.parent&&z(this.parent.children)){const t=this.parent.children;t.map(((e,r)=>{e===this&&t.splice(r,1)}))}},unmounted(){if(this.parent&&z(this.parent.children)){const t=this.parent.children;t.map(((e,r)=>{e===this&&t.splice(r,1)}))}}};const dt=p({name:"uv-vtabs-item",mixins:[Z,ht],props:{index:{type:[Number,String],default:0}},data:()=>({top:0,height:0}),mounted(){this.init()},methods:{async init(){if(this.getParentData("uv-vtabs"),!this.parent)return this.$uv.error("uv-vtabs必须要搭配uv-vtabs-item组件使用");this.parent.chain&&(await this.$uv.sleep(),this.getItemRect().then((t=>{this.top=t.top,this.height=t.height})))},getItemRect(){return new Promise((t=>{this.$uvGetRect(".uv-vtabs-item").then((e=>{t(e)}))}))}}},[["render",function(t,e,r,n,i,s){const o=y;return g(),f(o,{class:"uv-vtabs-item",id:`content_${r.index}`,ref:"uv-vtabs-item"},{default:m((()=>[b(t.$slots,"default")])),_:3},8,["id"])}]]),pt={props:{isDot:{type:Boolean,default:!1},value:{type:[Number,String],default:""},show:{type:Boolean,default:!0},max:{type:[Number,String],default:999},type:{type:[String,void 0,null],default:"error"},showZero:{type:Boolean,default:!1},bgColor:{type:[String,null],default:null},color:{type:[String,null],default:null},shape:{type:[String,void 0,null],default:"circle"},numberType:{type:[String,void 0,null],default:"overflow"},offset:{type:Array,default:()=>[]},inverted:{type:Boolean,default:!1},absolute:{type:Boolean,default:!1},...null==(e=null==(t=uni.$uv)?void 0:t.props)?void 0:e.badge}};const gt=p({name:"uv-badge",mixins:[Z,ht,pt],computed:{boxStyle:()=>({}),badgeStyle(){const t={};if(this.color&&(t.color=this.color),this.bgColor&&!this.inverted&&(t.backgroundColor=this.bgColor),this.absolute&&(t.position="absolute",this.offset.length)){const e=this.offset[0],r=this.offset[1]||e;t.top=this.$uv.addUnit(e),t.right=this.$uv.addUnit(r)}return t},showValue(){switch(this.numberType){case"overflow":return Number(this.value)>Number(this.max)?this.max+"+":this.value;case"ellipsis":return Number(this.value)>Number(this.max)?"...":this.value;case"limit":return Number(this.value)>999?Number(this.value)>=9999?Math.floor(this.value/1e4*100)/100+"w":Math.floor(this.value/1e3*100)/100+"k":this.value;default:return Number(this.value)}},propsType(){return this.type||"error"}}},[["render",function(t,e,r,n,i,s){const o=x;return t.show&&(0!==Number(t.value)||t.showZero||t.isDot)?(g(),f(o,{key:0,class:$([[t.isDot?"uv-badge--dot":"uv-badge--not-dot",t.inverted&&"uv-badge--inverted","horn"===t.shape&&"uv-badge--horn",`uv-badge--${s.propsType}${t.inverted?"--inverted":""}`],"uv-badge"]),style:w([t.$uv.addStyle(t.customStyle),s.badgeStyle])},{default:m((()=>[v(S(t.isDot?"":s.showValue),1)])),_:1},8,["class","style"])):_("",!0)}],["__scopeId","data-v-8c3e535e"]]);const ft=p({name:"uv-vtabs",mixins:[Z,ht,{props:{list:{type:Array,default:()=>[]},keyName:{type:String,default:"name"},current:{type:[Number,String],default:0},hdHeight:{type:[Number,String],default:0},chain:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},barWidth:{type:[Number,String],default:"180rpx"},barScrollable:{type:Boolean,default:!0},barBgColor:{type:String,default:""},barStyle:{type:[Object,String],default:""},barItemStyle:{type:[Object,String],default:""},barItemActiveStyle:{type:[Object,String],default:""},barItemActiveLineStyle:{type:[Object,String],default:""},barItemBadgeStyle:{type:[Object,String],default:""},contentStyle:{type:[Object,String],default:""}}}],created(){this.children=[]},mounted(){this.$nextTick((()=>{this.init(this.current)}))},data:()=>({activeIndex:0,contentScrollTop:0,contentScrollTop2:0,contentScrollTo:"",scrolling:!1,barScrolling:!1,touching:!1,hasHeight:0,scrollViewHeight:0,barScrollTop:0,barScrollToView:"",timer2:0}),computed:{scrollX:()=>!1,vtabsStyle(){const t={};return t.height=this.getHeight(),this.$uv.deepMerge(t,this.$uv.addStyle(this.customStyle))},getBarStyle(){const t={};return t.width=this.$uv.getPx(this.barWidth,!0),t.background=this.barBgColor,t.height=this.getHeight(),this.$uv.deepMerge(t,this.$uv.addStyle(this.barStyle))},itemStyle(){return t=>{var e;const r={};let n=this.barItemStyle;this.barItemStyle&&!(null==(e=this.barItemStyle)?void 0:e.background)&&(n.background="transparent");const i=t===this.activeIndex?this.$uv.addStyle(this.barItemActiveStyle):this.$uv.addStyle(n);return this.list[t].disabled&&(r.color="#c8c9cc"),this.$uv.deepMerge(r,i)}},textStyle(){return t=>{const e={};return e.width=this.$uv.getPx(this.barWidth,!0),e}},getContentStyle(){const t={};return t.height=this.getHeight(),t},propsBadge:()=>pt},watch:{current(t){this.touching||this.$nextTick((()=>{this.init(t||0)}))},list(t){t.length&&this.$uv.sleep(30).then((t=>{this.resize()}))},activeIndex(t){this.chain||(this.contentScrollTop2=0-4*Math.random()-4),this.$emit("change",t)}},methods:{init(t){let e=0;clearInterval(this.timer2),this.timer2=setInterval((async()=>{e++,e>50&&clearInterval(this.timer2),this.children.length&&(clearInterval(this.timer2),await this.$uv.sleep(300),this.clickHandler(t))}),100)},scrolltolower(){this.$emit("scrolltolower",this.activeIndex)},async resize(){0!=this.list.length&&this.barScrollable&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then((([t,e=[]])=>{this.tabsRect=t,this.scrollViewHeight=0,e.map(((t,e)=>{this.scrollViewHeight+=t.height,this.list[e].rect=t})),this.setBarScrollTop()}))},setBarScrollTop(){const t=this.list[this.activeIndex],e=this.list.slice(0,this.activeIndex).reduce(((t,e)=>t+e.rect.height),0),r=this.$uv.getPx(this.getHeight());let n=t.rect.height/2+e-r/2;n=Math.min(n,this.scrollViewHeight-this.tabsRect.height),this.barScrollTop=Math.max(0,n),n>=this.scrollViewHeight-this.tabsRect.height&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.barScrollToView=`bar_${this.activeIndex}`}),400))},async clickHandler(t){t!=this.activeIndex&&(this.touching=!0,this.activeIndex=t,this.chain&&(this.contentScrollTop=this.children[t].top-this.$uv.getPx(this.hdHeight)-4*Math.random()-4,this.contentScrollTo=`content_${t}`),this.timer&&clearTimeout(this.timer),ut((()=>{this.resize()}),300,!1),ct((()=>{this.touching=!1}),900))},scrollHandler(t){if(this.touching||this.scrolling)return;this.scrolling=!0,this.$uv.sleep(80).then((()=>{this.scrolling=!1}));const e=t.detail.scrollTop;let r=this.children;const n=r.length;let i=0,s=0;r=this.children.map(((t,e)=>{t.height>0&&(this.hasHeight=t.height),t.height=t.height>0?t.height:this.hasHeight;const r={height:t.height,top:i};return i+=t.height,r}));for(let o=0;o<n;o++){const t=r[o],i=r[o+1];if(e<=r[0].top){s=0;break}if(!i){s=n-1;break}if(e>t.top&&e<i.top){s=o;break}}this.activeIndex=s,this.timer4&&clearTimeout(this.timer4),this.timer4=setTimeout((()=>{this.resize()}),100)},getHeight(){let t=0;return t=this.$uv.test.empty(this.height)||"auto"==this.height?this.$uv.addUnit(this.$uv.sys().windowHeight):this.$uv.getPx(this.height,!0),t},getTabsRect(){return new Promise((t=>{this.queryRect("uv-vtabs__bar").then((e=>t(e)))}))},getAllItemRect(){return new Promise((t=>{const e=this.list.map(((t,e)=>this.queryRect(`uv-vtabs__bar-item--${e}`,!0)));Promise.all(e).then((e=>t(e)))}))},queryRect(t,e){return new Promise((e=>{this.$uvGetRect(`.${t}`).then((t=>{e(t)}))}))}}},[["render",function(t,e,r,n,i,s){const o=y,a=x,l=B(T("uv-badge"),gt),c=P;return g(),f(o,{class:"uv-vtabs",style:w([s.vtabsStyle])},{default:m((()=>[k(c,{class:"uv-vtabs__bar",ref:"uv-vtabs__bar",style:w([s.getBarStyle]),"scroll-y":t.barScrollable,"scroll-x":s.scrollX,"show-scrollbar":!1,"scroll-with-animation":!0,"scroll-top":i.barScrollTop,"scroll-into-view":i.barScrollToView},{default:m((()=>[(g(!0),j(I,null,A(t.list,((e,r)=>(g(),f(o,{class:$(["uv-vtabs__bar-item",`uv-vtabs__bar-item--${r}`,r==i.activeIndex&&"uv-vtabs__bar-item-active"]),ref_for:!0,ref:`uv-vtabs__bar-item--${r}`,key:r,id:`bar_${r}`,style:w([s.itemStyle(r)]),onClick:N((t=>s.clickHandler(r)),["stop"])},{default:m((()=>[r==i.activeIndex?(g(),f(o,{key:0,class:"uv-vtabs__bar-item--line",style:w([t.$uv.addStyle(t.barItemActiveLineStyle)])},null,8,["style"])):_("",!0),k(a,{class:$(["uv-vtabs__bar-item--value",r==i.activeIndex&&"uv-vtabs__bar-item-active--value"]),style:w([s.itemStyle(r),s.textStyle(r)])},{default:m((()=>[v(S(e[t.keyName]),1)])),_:2},1032,["class","style"]),e.badge&&(e.badge.show||e.badge.isDot||e.badge.value)?(g(),f(o,{key:1,class:"uv-vtabs__bar-item--badge",style:w([t.$uv.addStyle(t.barItemBadgeStyle)])},{default:m((()=>[k(l,{show:!(!e.badge||!(e.badge.show||e.badge.isDot||e.badge.value)),isDot:e.badge&&e.badge.isDot||s.propsBadge.isDot,value:e.badge&&e.badge.value||s.propsBadge.value,max:e.badge&&e.badge.max||s.propsBadge.max,type:e.badge&&e.badge.type||s.propsBadge.type,showZero:e.badge&&e.badge.showZero||s.propsBadge.showZero,bgColor:e.badge&&e.badge.bgColor||s.propsBadge.bgColor,color:e.badge&&e.badge.color||s.propsBadge.color,shape:e.badge&&e.badge.shape||s.propsBadge.shape,numberType:e.badge&&e.badge.numberType||s.propsBadge.numberType,inverted:e.badge&&e.badge.inverted||s.propsBadge.inverted},null,8,["show","isDot","value","max","type","showZero","bgColor","color","shape","numberType","inverted"])])),_:2},1032,["style"])):_("",!0)])),_:2},1032,["class","id","style","onClick"])))),128))])),_:1},8,["style","scroll-y","scroll-x","scroll-top","scroll-into-view"]),t.chain?(g(),f(c,{key:0,class:"uv-vtabs__content",style:w([s.getContentStyle,t.$uv.addStyle(t.contentStyle)]),"scroll-y":!0,"scroll-x":s.scrollX,"show-scrollbar":!1,"scroll-top":i.contentScrollTop,"scroll-into-view":i.contentScrollTo,"scroll-with-animation":!0,onScroll:s.scrollHandler,onScrolltolower:s.scrolltolower},{default:m((()=>[b(t.$slots,"default",{},void 0,!0)])),_:3},8,["style","scroll-x","scroll-top","scroll-into-view","onScroll","onScrolltolower"])):(g(),f(c,{key:1,class:"uv-vtabs__content",style:w([s.getContentStyle,t.$uv.addStyle(t.contentStyle)]),"scroll-y":!0,"scroll-x":s.scrollX,"show-scrollbar":!1,"scroll-top":i.contentScrollTop2,onScrolltolower:s.scrolltolower},{default:m((()=>[b(t.$slots,"default",{},void 0,!0)])),_:3},8,["style","scroll-x","scroll-top","onScrolltolower"]))])),_:3},8,["style"])}],["__scopeId","data-v-1bdfeaa1"]]);const mt=p({data:()=>({current:0,list:[],records:[],page:1,limit:20,last_id:0}),computed:{height(){return i().windowHeight-this.CustomBar}},onLoad(){this.loadTypes()},methods:{change(t){this.current=t,this.records=[],this.last_id=0,this.getList()},goDetail(t){o({url:`/pages/mall/detail?id=${t}`})},scrolltolower(t){this.getList()},getList(){M({mask:!0}),this.$api.mallApi.getProductList({page:this.page,limit:this.limit,last_id:this.last_id,type:this.list[this.current].name}).then((t=>{0==t.code&&t.data.data.length>0&&(this.records=[...this.records,...t.data.data],this.records.length>0&&(this.last_id=this.records[this.records.length-1].id)),O()}))},loadTypes(){this.$api.mallApi.getAllTypes().then((t=>{0==t.code&&(this.list=t.data,this.current=0,this.records=[],this.last_id=0,this.list.length>0&&this.getList())}))}}},[["render",function(t,e,r,n,i,s){const o=D("cu-custom"),a=y,l=R,c=x,u=B(T("uv-vtabs-item"),dt),h=B(T("uv-vtabs"),ft);return g(),j(I,null,[k(o,{bgColor:"bg-gradual-green",isBack:!0},{backText:m((()=>[])),content:m((()=>[v("商城")])),right:m((()=>[])),_:1}),k(h,{chain:!1,list:i.list,keyName:"name",hdHeight:"45",height:s.height,current:i.current,onChange:s.change,onScrolltolower:s.scrolltolower},{default:m((()=>[k(u,null,{default:m((()=>[k(a,{class:"product-list"},{default:m((()=>[0===i.records.length?(g(),f(a,{key:0},{default:m((()=>[v(" 暂无商品 ")])),_:1})):(g(!0),j(I,{key:1},A(i.records,(t=>(g(),f(a,{class:"product-item",key:t.id,onClick:e=>s.goDetail(t.id)},{default:m((()=>[k(l,{src:t.img},null,8,["src"]),k(a,{class:"product-item-content"},{default:m((()=>[k(c,{class:"item-name"},{default:m((()=>[v(S(t.name),1)])),_:2},1024),k(a,{class:"item-meta"},{default:m((()=>[k(a,{class:"meta-points"},{default:m((()=>[k(l,{src:C}),k(c,null,{default:m((()=>[v(S(t.points)+"元",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["list","height","current","onChange","onScrolltolower"])],64)}],["__scopeId","data-v-c7d4c107"]]);export{mt as default};
