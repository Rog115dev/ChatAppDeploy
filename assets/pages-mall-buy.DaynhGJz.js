import{_ as e,G as a,a4 as l,A as o,B as t,n as s,C as n,r,b as i,a as d,w as u,f as m,F as f,g as p,o as c,e as h,t as _,j as g,ab as w,W as b}from"./index-nIaQZq1w.js";import{_ as V}from"./uni-number-box.BXn574fw.js";import{r as y}from"./uni-app.es.CqmdVAE5.js";const k=e({data:()=>({form:{person:"",addr:"",phone:"",count:1}}),onLoad(e){if(!e.id)return a({title:"商品不存在",icon:"none"}),void l();this.getDetail(e.id)},methods:{getDetail(e){this.$api.mallApi.getProductDetail({id:e}).then((e=>{if(0==e.code){let a=e.data;this.form.id=a.id,this.form.type=a.type,this.form.name=a.name,this.form.img=a.img,this.form.points=a.points}else a({title:"商品不存在",icon:"none"}),l()}))},buy(){this.form.person&&this.form.addr&&this.form.phone?this.form.count?(o({mask:!0}),this.$api.mallApi.buy(this.form).then((e=>{0==e.code?(t(),a({title:e.msg,icon:"none"}),s({url:"/pages/mall/list"})):(t(),a({title:e.msg,icon:"none"}))}))):a({title:"请填写购买数量",icon:"none"}):a({title:"请填写收货信息",icon:"none"})}}},[["render",function(e,a,l,o,t,s){const k=n("cu-custom"),x=g,C=w,j=p,U=y(r("uni-number-box"),V),A=b;return c(),i(f,null,[d(k,{bgColor:"bg-gradual-green",isBack:!0},{backText:u((()=>[])),content:u((()=>[h("商品购买")])),right:u((()=>[])),_:1}),d(j,{class:"container",style:m({height:`calc(100% - ${e.CustomBar}px)`})},{default:u((()=>[d(j,{class:"row-wrapper person-info"},{default:u((()=>[d(j,{class:"row-item"},{default:u((()=>[d(x,null,{default:u((()=>[h("收货人")])),_:1}),d(C,{modelValue:t.form.person,"onUpdate:modelValue":a[0]||(a[0]=e=>t.form.person=e),placeholder:"请输入收货人"},null,8,["modelValue"])])),_:1}),d(j,{class:"row-item"},{default:u((()=>[d(x,null,{default:u((()=>[h("联系方式")])),_:1}),d(C,{modelValue:t.form.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>t.form.phone=e),placeholder:"请输入联系方式"},null,8,["modelValue"])])),_:1}),d(j,{class:"row-item"},{default:u((()=>[d(x,null,{default:u((()=>[h("收货地址")])),_:1}),d(C,{modelValue:t.form.addr,"onUpdate:modelValue":a[2]||(a[2]=e=>t.form.addr=e),placeholder:"请输入收货地址"},null,8,["modelValue"])])),_:1})])),_:1}),d(j,{class:"row-wrapper meta-info"},{default:u((()=>[d(j,{class:"row-item"},{default:u((()=>[d(x,null,{default:u((()=>[h("购买数量")])),_:1}),d(U,{modelValue:t.form.count,"onUpdate:modelValue":a[3]||(a[3]=e=>t.form.count=e),step:1,min:1},null,8,["modelValue"])])),_:1})])),_:1}),d(j,{class:"row-wrapper deal"},{default:u((()=>[d(j,{class:"row-item"},{default:u((()=>[d(x,null,{default:u((()=>[h("商品单价")])),_:1}),d(x,null,{default:u((()=>[h(_(t.form.points)+" 元",1)])),_:1})])),_:1}),d(j,{class:"row-item"},{default:u((()=>[d(x,null,{default:u((()=>[h("总金额")])),_:1}),d(x,null,{default:u((()=>[h(_(t.form.points*t.form.count)+" 元",1)])),_:1})])),_:1})])),_:1}),d(j,{class:"row-wrapper deal"},{default:u((()=>[d(A,{type:"primary",onClick:s.buy},{default:u((()=>[h("立即购买")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["style"])],64)}],["__scopeId","data-v-5a2ee641"]]);export{k as default};
